<!DOCTYPE html>
<html>
<head>
  <title>Deep Learning - EA 2</title>
  
  <!-- Import TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
  <!-- Import tfjs-vis -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" type="image/x-icon" href="vfh_logo_bildm.ico">
</head>
<body>
  <div class="header">
    <div class="space">
      <p class="font">Modul Deep Learning - EA 2: Regression mit FFNN</p>
    </div>
    
  </div>
  <div class="center">
    <!--
    <div>
      <h1>Visualierung Funktion mit gleichverteilten Werten</h1>
      <canvas id="chart_values"></canvas>
    </div>
    -->
    <h1>R1</h1>
    <p>Die Datens√§tze: links ohne Rauschen, rechts mit Rauschen, Trainingsdaten und Testdaten farblich unterschieden jeweils zusammen in einem Diagramm</p>
    <div class="r1">
      <div>
        <canvas class="dia" id="r1-ohneRauschen"></canvas>
      </div>
      <div>
        <canvas class="dia" id="r1-mitRauschen"></canvas>
      </div>
    </div>
    <h1>R2</h1>
    <p>Die Vorhersage des Modells, das ohne Rauschen trainiert wurde y_unverrauscht(x), links auf den Trainingsdaten, rechts auf den Testdaten (beide ohne Rauschen)</p>
    <div>
      <div id="progress-container">
        <div id="progress-bar">
        </div>
        <p id="progress-text">Warten auf Trainingsbeginn...</p>
      </div> 
    </div>
    <div class="r2">
      <div>
        <canvas class="dia" id="r2-train"></canvas>
      </div>
      <div>
        <canvas class="dia" id="r2-test"></canvas>
      </div>
    </div>
    <div id="r2-stats">
      <div>
        <canvas class="loss-chart" id="r2-loss-chart"></canvas>
      </div>
      <div>
        <p id="r2-train-loss">Finaler Loss auf Trainingsdaten:</p>
        <p id="r2-test-loss">Finaler Loss auf Testdaten:</p>
      </div>
    </div>
    
    <h1>R3</h1>
    <p>Die Vorhersage Ihres besten Modells y_best(x) trainiert auf den verrauschten Daten, links auf den Trainingsdaten, rechts auf den Testdaten (alles mit Rauschen)</p>
    <div>
      <div id="r3-progress-container">
        <div id="r3-progress-bar">
        </div>
        <p id="r3-progress-text">Warten auf Trainingsbeginn...</p>
      </div> 
    </div>
    <div class="r3">
      <div>
        <canvas class="dia" id="r3-train"></canvas>
      </div>
      <div>
        <canvas class="dia" id="r3-test"></canvas>
      </div>
    </div>
    <div id="r3-stats">
      <div>
        <canvas class="loss-chart" id="r3-loss-chart"></canvas>
      </div>
      <div>
        <p id="r3-train-loss">Finaler Loss auf Trainingsdaten:</p>
        <p id="r3-test-loss">Finaler Loss auf Testdaten:</p>
      </div>
    </div>

    <h1>R4</h1>
    <p>Die Vorhersage Ihres Overfit-Modells y_overfit(x) trainiert auf den verrauschten Daten, links auf den Trainingsdaten, rechts auf den Testdaten (alles mit Rauschen)</p>
    <div>
      <div id="r4-progress-container">
        <div id="r4-progress-bar">
        </div>
        <p id="r4-progress-text">Warten auf Trainingsbeginn...</p>
      </div> 
    </div>
    <div class="r4">
      <div>
        <canvas class="dia" id="r4-train"></canvas>
      </div>
      <div>
        <canvas class="dia" id="r4-test"></canvas>
      </div>
    </div>
    <div id="r4-stats">
      <div>
        <canvas class="loss-chart" id="r4-loss-chart"></canvas>
      </div>
      <div>
        <p id="r4-train-loss">Finaler Loss auf Trainingsdaten:</p>
        <p id="r4-test-loss">Finaler Loss auf Testdaten:</p>
      </div>
    </div>

    <div class="discussion">
      <h1>Diskussion</h1>
      <h2>R2</h2>
      <p>Grunds√§tzlich erreicht das trainierte Modell eine gute Approximation an die gegebene Funktion. In seltenen F√§llen werden Teile der Funktion schlecht nach-empfunden - einen direkten Zusammenhang zu den Trainingsdaten konnte ich nicht erkennen. Folgende Beispiele sollen dies verdeutlichen. Beide Screenshots sind mit dem gleichen Modell erstellt nur jeweils mit verschiedenen Trainingsdaten trainiert.</p>
      <p>Verwendete Parameter: ...</p>
      <div class="r1">
        <div>
          <p>TODO NEUE SCREENSHOTS Beispiel f√ºr eine (sehr) gute Approximation:</p>
          <div class="image-container">
            <img class="disc-r2 image thumbnail" src="images/a2-good.png" alt="Aufgabe A2 - gute Approximation">
            <div class="overlay">
                <span class="icon">üîç</span>
            </div>
          </div>
        </div>
        <div>
          <p>TODO NEUE SCREENSHOTS Beispiel f√ºr eine fehlerhafte Approximation:</p>
          <div class="image-container">
            <img class="disc-r2 image thumbnail" src="images/a2-faulty.png" alt="Aufgabe A2 - fehlerhafte Approximation">
            <div class="overlay">
                <span class="icon">üîç</span>
            </div>
          </div>
        </div>
      </div>
      <p>Overfitting kann in diesem Aufgabenteil nicht entstehen, da alle Trainingsdaten exakt auf der zu gesuchten Funktion liegen. Overfitting tritt erst auf, wenn die Trainingsdaten ein gewisses Rauschen aufweisen und nicht mehr perfekt auf der gesuchten Funktion liegen. Overfitting beschreibt dann den Zustand, wenn das Modell die Trainingsdaten zu genau nimmt und somit von der eigentlich gesuchten Funktion abweicht.</p>
      <h2>R3</h2>
      <p>Bei Aufgabe 3 soll das neuronale Netz bestm√∂glich generalisieren. In 9 von 10 Versuchen ist der Loss auf den Testdaten kleiner als der Loss auf den Trainingsdaten. Der kleinere Loss auf den Testdaten zeigt, dass das Modell gut auf neue Daten reagiert und nicht nur auswendig lernt. Um das Modell robuster zu machen wurden sowohl Dropouts genutzt, als auch durch Regularisierung die Gewichte begrenzt.</p>
      <p>Verwendete Parameter: ...</p>
      <h2>R4</h2>
      <p>Wenn nur sehr wenige Datens√§tze (z.b. N = 20) l√§sst sich das Ph√§nomen des Overfittings sehr sch√∂n zeigen, mit steigender Anzahl an Datens√§tzen wird dies immer schwieriger.</p>
      <p>Verwendete Parameter: ...</p>
      <p>Bei Bildern, die aus dem Trainingsdatensatz stammen, erfolgte in allen Stichproben eine korrekte Klassifikation mit einer sehr hohen Wahrscheinlichkeit. Werden eigene Bilder von gleichen Objekten hochgeladen  (Beispiel: Goldfisch, Marienk√§fer oder Sicherheitsnadel), dann wird ebenfalls mit sehr hoher Wahrscheinlichkeit die korrekte Klassifikation vorgenommen.
      Sind verschiedene Objekte auf einem Bild zu erkennen, dann sinkt die Wahrscheinlichkeit einer korrekten Klassifikation erheblich und es kommt in einigen F√§llen zu falschen Zuordnungen. Bei dem dritten Beispiel der korrekten Zuordnung betr√§gt die Wahrscheinlichkeit, dass es sich um eine K√ºste handelt nur knapp 19%. Es ist somit eine gewisse Unsicherheit damit verbunden. Bilder von / mit Personen sind besonders schwierig vom Modell zu klassifizieren - aus Datenschutzgr√ºnden soll kein Beispiel gezeigt werden.</p>
      <p>Bei den falsch klassifizierten Bildern kann es unterschiedliche Gr√ºnde daf√ºr geben:
        <ul>
          <li>Trainingsdaten enthalten nur ein bestimmtes Set an Objekten / Klassifikationen -> Wird ein Bild mit unbekannten Dingen gezeigt (Beispiel: Planet Erde), wird nur bestm√∂glichste Klasse gefunden was dennoch falsch ist</li>
          <li>Die Trainingsdaten des Modells enthalten viele Bilder, auf denen nicht nur ein Objekt zu sehen ist, sondern mehrere und mit der Bezeichnung keine klare Zuordnung vorgenommen werden kann (Beispiel: n04116512_rubber_eraser.JPEG -> zusehen auch Bleistift, Notenbuch, Notenst√§nder)</li>
          <li>Manche Gegenst√§nde sind in "falscher" Gr√∂√üe / Relation dargestellt (Beispiel: n04127249_safety_pin.JPEG)</li>
        </ul>
      </p>
    </div>
    <div class="doku">
      <h1>Dokumentation</h1>
      <h2>Technisch</h2>
      <p>
        Die Web-Anwendung basiert auf einer HTML-Datei, die mit CSS gestylt und JavaScript interaktiv erweitert wurde. Zus√§tzlich wurden folgende Frameworks verwendet:
        <ul>
          <li>TensorFlow.js: Erstellen und trainieren eigener neuronaler Netze zur Vorhersage von Funktionswerten einer mathematischen Funktion</li>
          <li>chart.js: Darstellung der Funktionswerte in Diagrammen</li>
        </ul>
      </p>
      
      <h2>Fachlich</h2>
      <p>In der Anwendung werden keine gespeicherten Modelle verwendet. Bei jedem Aufruf der Webseite werden die definierten Modelle f√ºr R2, R3 und R4 jeweils neu (mit den gerade aktuellen Trainingsdaten) trainiert und f√ºr die Vorhersagen genutzt. Trotz der vielen Trials w√§hrend der Entwicklung und Optimierung der Modelle, kann es passieren, dass der aktuelle Zustand in seltenen F√§llen eine nicht optimale L√∂sung der Aufgabe darstellt. Mit einem Reload der Webseite wird zu hoher Wahrscheinlichkeit ein besseres Ergebnis erzielt.</p>
      <p>
        Die Anwendung wurde iterativ entwickelt:
        <ul>
          <li>Generierung von Testdaten sowie minimale Visualierung mit chart.js (A1)</li>
          <li>Erweiterung durch Anbindung von tensorflow.js sowie erstem Modell zur Vorhersage von Funktionswerten (A2)</li>
          <li>√úbernahme der HTML-Basis (inkl. CSS) aus EA 1</li>
          <li>Implementierung der Modelle f√ºr A3 und A4</li>
          <li>Implementierung des Diagramms f√ºr den Loss zur besseren Kontrolle √ºber die Fortschritte der Modelle</li>
          <li>Optimierung der Modelle um Aufgabenstellung bestm√∂glich zu erreichen</li>
          <li>Optimierung der grafischen Darstellung</li>
        </ul>
        Verwendete Quellen / Tools:
        <ul>
          <li>Dokumentation zu tensorflow.js <a href="https://js.tensorflow.org/api/3.6.0/" target="_blank">https://js.tensorflow.org/api/3.6.0/</a> und <a href="https://www.tensorflow.org/js/guide" target="_blank">https://www.tensorflow.org/js/guide</a></li>
          <li>Dokumentation zu chart.js <a href="https://www.chartjs.org/docs/latest/" target="_blank">https://www.chartjs.org/docs/latest/</a></li>
          <li><a href="https://www.w3schools.com/css/default.aspx" target="_blank">https://www.w3schools.com</a></li>
          <li>Bei Problemen aller Art <a href="https://stackoverflow.com" target="_blank">https://stackoverflow.com</a></li>
        </ul>
      </p>
    </div>

  </div>

  
  <!-- div f√ºr vergr√∂√üerte Bilder-->
  <div class="lightbox" id="lightbox">
    <img id="lightboxImage" src="" alt="Vergr√∂√üertes Bild">
  </div>


  <!-- Import the main script file -->
  <script src="script.js"></script>
</body>
</html>
